<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HB Review Portal</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: system-ui, sans-serif; background: #1a1a1a; color: #eee; }

    .header { position: fixed; top: 0; left: 0; right: 0; background: #1a1a1a; border-bottom: 1px solid #333; padding: 16px; display: flex; justify-content: space-between; align-items: center; z-index: 100; }
    .back-btn { padding: 8px 16px; background: #2a2a2a; border: 1px solid #444; border-radius: 6px; color: #eee; cursor: pointer; display: none; }

    .view { display: none; padding: 80px 16px 40px; max-width: 800px; margin: 0 auto; }
    .view.active { display: block; }

    h1 { font-size: 24px; margin-bottom: 8px; }
    .subtitle { color: #888; margin-bottom: 24px; }

    .cards { display: grid; gap: 16px; }
    .card { background: #252525; border: 1px solid #333; border-radius: 8px; padding: 20px; cursor: pointer; text-align: left; width: 100%; font: inherit; color: inherit; }
    .card:hover { background: #303030; }
    .card-title { font-size: 18px; font-weight: 600; margin-bottom: 8px; }
    .card-desc { font-size: 14px; color: #999; margin-bottom: 12px; }
    .card-meta { font-size: 12px; color: #666; }

    .toggle { display: flex; gap: 4px; background: #252525; border-radius: 6px; padding: 4px; width: fit-content; margin-bottom: 24px; }
    .toggle-btn { padding: 8px 16px; background: transparent; border: none; color: #888; cursor: pointer; border-radius: 4px; font: inherit; }
    .toggle-btn.active { background: #333; color: #eee; }
    .toggle-btn.good.active { color: #4a9; }
    .toggle-btn.bad.active { color: #c66; }

    .screen { background: #252525; border: 1px solid #333; border-radius: 8px; padding: 16px; margin-bottom: 12px; cursor: pointer; text-align: left; width: 100%; font: inherit; color: inherit; }
    .screen:hover { background: #303030; }
    .screen-step { font-size: 12px; color: #666; text-transform: uppercase; margin-bottom: 4px; }
    .screen-title { font-size: 16px; font-weight: 500; }

    .detail-box { background: #252525; border: 1px solid #333; border-radius: 8px; padding: 20px; margin-bottom: 16px; }
    .detail-label { font-size: 12px; color: #666; text-transform: uppercase; margin-bottom: 8px; }
    .detail-content { font-size: 15px; line-height: 1.6; white-space: pre-wrap; }
  </style>
</head>
<body>

<div class="header">
  <span id="breadcrumb">All Flows</span>
  <button class="back-btn" id="backBtn" onclick="goBack()">Back</button>
</div>

<!-- View 1: All Flows -->
<div class="view active" id="viewFlows">
  <h1>Hibiscus Studio Booking Flows</h1>
  <p class="subtitle">Verified from source code</p>
  <div class="cards">
    <button class="card" onclick="showFlow('funnel')">
      <div class="card-title">Event-Type Funnel</div>
      <div class="card-desc">4-step recommendation engine</div>
      <div class="card-meta">event-type-funnel.html • 4 steps</div>
    </button>
    <button class="card" onclick="showFlow('main')">
      <div class="card-title">Category-Based Flow (Live)</div>
      <div class="card-desc">Production system with Acuity</div>
      <div class="card-meta">index.html • 3 steps</div>
    </button>
    <button class="card" onclick="showFlow('demo')">
      <div class="card-title">Booking Demo Wizard</div>
      <div class="card-desc">8-step prototype</div>
      <div class="card-meta">booking-demo.html • 8 steps</div>
    </button>
  </div>
</div>

<!-- View 2: Flow Screens -->
<div class="view" id="viewFlow">
  <h1 id="flowTitle"></h1>
  <p class="subtitle" id="flowSource"></p>
  <div class="toggle" id="pathToggle">
    <button class="toggle-btn good active" onclick="setPath('good')">Good path</button>
    <button class="toggle-btn bad" onclick="setPath('bad')">Bad path</button>
  </div>
  <div id="screenList"></div>
</div>

<!-- View 3: Screen Detail -->
<div class="view" id="viewScreen">
  <div class="screen-step" id="detailStep"></div>
  <h1 id="detailTitle" style="margin-bottom:24px"></h1>
  <div id="detailContent"></div>
  <div class="detail-box">
    <div class="detail-label">Review Question</div>
    <div class="detail-content" id="detailQuestion"></div>
  </div>
</div>

<script>
var data = {
  funnel: {
    title: 'Event-Type Funnel',
    source: 'event-type-funnel.html',
    good: [
      { step: 'Step 1', title: 'Event Type', copy: 'What are you celebrating?\n\nOptions:\n• Bridal Shower\n• Baby Shower\n• Birthday (Milestone)\n• Birthday (Casual)\n• Corporate Event\n• Other', question: 'Are these categories clear?' },
      { step: 'Step 2', title: 'Guest Count', copy: 'How many guests?\n\nInput: 1-50\nWarning at 40+: "We have flexible options"', question: 'Is the warning helpful or concerning?' },
      { step: 'Step 3', title: 'Date Selection', copy: 'When is your event?\n\nDate picker (min: today)\nCheckbox: "I\'m flexible on date"', question: 'What do you do with flexible date info?' },
      { step: 'Step 4', title: 'Recommendation', copy: 'Perfect! Here\'s our recommendation:\n\nHalf-Day Package £465\n6 hours (4PM-10PM)\n\nWhy: 8 of 12 bridal showers chose this', question: 'Does reasoning feel helpful or pushy?' }
    ],
    bad: [
      { step: 'Error 1', title: 'No Selection', copy: 'User clicks Next without choosing.\n\nISSUE: Button does nothing. No feedback.', question: 'Should we show "Please select" message?' },
      { step: 'Error 2', title: 'Invalid Guests', copy: 'User enters 0 or >50.\n\nISSUE: HTML5 validation blocks but no message.', question: 'Should we explain the limit?' },
      { step: 'Error 3', title: 'Acuity Fails', copy: 'Book button doesn\'t open Acuity.\n\nISSUE: No fallback. Dead end.', question: 'Add phone number fallback?' }
    ]
  },
  main: {
    title: 'Category-Based Flow (Live)',
    source: 'index.html',
    good: [
      { step: 'Step 1', title: 'Category Selection', copy: 'Ready to book?\n\nCategories:\n• Studio Viewing - Free\n• Event Hire - £345-£885\n• Workshops - £90-£645\n• Proposals - £770-£1700', question: 'Are categories clear?' },
      { step: 'Step 2', title: 'Package Selection', copy: 'Event Hire Options:\n\n• 4hrs Flexi - £345\n• Half-Day - £465\n• 8hrs Flexi - £645\n• Full-Day (POPULAR) - £885\n• Late Finish - £845', question: 'Is "Most Popular" helpful?' },
      { step: 'Step 3', title: 'Acuity Modal', copy: 'Modal opens with Acuity scheduler.\n\nShows: Calendar, time slots, form.', question: 'Does modal feel disconnected?' }
    ],
    bad: [
      { step: 'Error 1', title: 'Modal Broken', copy: 'Book Now does nothing.\n\nCause: JS error or popup blocked.', question: 'Show email fallback?' },
      { step: 'Error 2', title: 'No Availability', copy: 'Calendar shows "No times available".\n\nAll dates grayed out.', question: 'Warn before opening modal?' },
      { step: 'Error 3', title: 'No Invoice', copy: '48hr invoice never sent.\n\nCustomer thinks booked. You have no record.', question: 'Automate invoice sending?' }
    ]
  },
  demo: {
    title: 'Booking Demo Wizard',
    source: 'booking-demo.html',
    good: [
      { step: 'Step 1', title: 'Event Type', copy: 'What are you planning?\n\n• Bridal shower\n• Private party\n• Workshop', question: 'Clear options?' },
      { step: 'Steps 2-4', title: 'Date Selection', copy: 'Step 2: This month / Next 1-2 months / Later\nStep 3: Weekend / Weekday\nStep 4: Pick specific date', question: 'Is 3 steps too many for date?' },
      { step: 'Step 5', title: 'Time Slots', copy: '• 12pm-6pm £465\n• 2pm-8pm £465\n• 4pm-10pm £465 (POPULAR)\n• 6pm-12am £645', question: 'Is emotional copy helpful or cheesy?' },
      { step: 'Steps 6-7', title: 'Details', copy: 'Guest count: 1-10 / 11-20 / 21-30 / 31-40\nForm: Name, Email, Phone', question: 'Good form UX?' },
      { step: 'Steps 8-9', title: 'Confirmation', copy: 'Summary shown.\n50% deposit: £233\n\n✓ Booking Confirmed!', question: 'Is payment flow clear?' }
    ],
    bad: []
  }
};

var currentFlow = null;
var currentPath = 'good';
var currentScreen = null;

function showFlow(id) {
  currentFlow = id;
  currentPath = 'good';
  document.getElementById('viewFlows').classList.remove('active');
  document.getElementById('viewFlow').classList.add('active');
  document.getElementById('flowTitle').textContent = data[id].title;
  document.getElementById('flowSource').textContent = 'Source: ' + data[id].source;
  document.getElementById('breadcrumb').textContent = data[id].title;
  document.getElementById('backBtn').style.display = 'block';
  document.getElementById('pathToggle').style.display = data[id].bad.length ? 'flex' : 'none';
  document.querySelector('.toggle-btn.good').classList.add('active');
  document.querySelector('.toggle-btn.bad').classList.remove('active');
  renderScreens();
}

function setPath(p) {
  currentPath = p;
  document.querySelector('.toggle-btn.good').classList.toggle('active', p === 'good');
  document.querySelector('.toggle-btn.bad').classList.toggle('active', p === 'bad');
  renderScreens();
}

function renderScreens() {
  var screens = data[currentFlow][currentPath];
  var html = '';
  for (var i = 0; i < screens.length; i++) {
    html += '<button class="screen" onclick="showScreen(' + i + ')"><div class="screen-step">' + screens[i].step + '</div><div class="screen-title">' + screens[i].title + '</div></button>';
  }
  document.getElementById('screenList').innerHTML = html;
}

function showScreen(idx) {
  currentScreen = idx;
  var screen = data[currentFlow][currentPath][idx];
  document.getElementById('viewFlow').classList.remove('active');
  document.getElementById('viewScreen').classList.add('active');
  document.getElementById('detailStep').textContent = screen.step;
  document.getElementById('detailTitle').textContent = screen.title;
  document.getElementById('detailQuestion').textContent = screen.question;
  document.getElementById('detailContent').innerHTML = '<div class="detail-box"><div class="detail-label">Screen Copy</div><div class="detail-content">' + screen.copy + '</div></div>';
}

function goBack() {
  if (document.getElementById('viewScreen').classList.contains('active')) {
    document.getElementById('viewScreen').classList.remove('active');
    document.getElementById('viewFlow').classList.add('active');
  } else if (document.getElementById('viewFlow').classList.contains('active')) {
    document.getElementById('viewFlow').classList.remove('active');
    document.getElementById('viewFlows').classList.add('active');
    document.getElementById('breadcrumb').textContent = 'All Flows';
    document.getElementById('backBtn').style.display = 'none';
    currentFlow = null;
  }
}
</script>
</body>
</html>
